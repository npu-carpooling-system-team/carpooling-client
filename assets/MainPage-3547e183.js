import{K as b,k as g,M as h,H as w,o as n,c as l,a as s,b as i,q as o,d as m,v as _,n as k,s as p,p as N,T,N as U,r as x,l as D,O as V}from"./.pnpm-88824f8d.js";import{_ as B}from"./index-855b0b3e.js";const C=b("currentUser",()=>({currentUser:g({user:{id:1,username:"13500560235",userImage:"https://wangminan-files.oss-cn-hongkong.aliyuncs.com/bucket/defaultYouDontKnow.png",email:"wangminan0811@hotmail.com",alipayId:"2088722003402347",isDriver:!0,isPassenger:!0,isDeleted:1},driver:{id:3,driverId:4,driversPersonalId:"330105200208153213",driversName:"王旻安",driversLicenseNo:"330106748147",driversLicenseType:"C1",driversPlateNo:"浙AS1245",driversVehicleType:"白色斯柯达",driversExpireDate:"",avgScore:"",isDeleted:1}})})),I={__name:"NavBar",setup(d){const c=g(0),u=C(),{currentUser:r}=h(u),v=async()=>{k({duration:0,forbidClick:!0,message:"正在加载您的个人信息"});try{const{data:e}=await B.get("/api/user/info");e.code===2e3?u.$patch(a=>{a.currentUser=e.result.result}):p({type:"danger",message:`首页初始化失败,${e.msg},请刷新页面重试`})}catch(e){p({type:"danger",message:`首页初始化失败,${e.message}`})}finally{N()}};return w(async()=>{await v()}),(e,a)=>{const t=T,f=U;return n(),l(f,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=y=>c.value=y)},{default:s(()=>[i(t,{icon:"shop-o"},{default:s(()=>[o("拼车大厅")]),_:1}),m(r).user.isDeleted===0?(n(),l(t,{key:0,icon:"logistics"},{default:s(()=>[o("我要拼车")]),_:1})):_("",!0),m(r).driver.isDeleted===0?(n(),l(t,{key:1,icon:"records"},{default:s(()=>[o("我有空车")]),_:1})):_("",!0),i(t,{icon:"user-o"},{default:s(()=>[o("我")]),_:1})]),_:1},8,["modelValue"])}}},$={__name:"MainPage",setup(d){return console.log("hello"),(c,u)=>{const r=x("router-view");return n(),D(V,null,[i(r),i(I)],64)}}};export{$ as default};
