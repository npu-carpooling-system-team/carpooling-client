import{a7 as o,h as t,s as r}from"./.pnpm-2d117cc4.js";import{r as n}from"./index-0fc59ae9.js";const a=o.create({baseURL:"https://carpooling-server.wangminan.me"});a.interceptors.request.use(e=>(t.get("token")!==void 0&&(e.headers.Authorization="Bearer "+t.get("token")),e),e=>Promise.reject(e));a.interceptors.response.use(e=>(e!==null&&e.data!==null&&e.data.code!==null&&(e.data.code===4012||e.data.code===4010||e.data.code===4030)&&(t.remove("token"),r({type:"danger",message:"登录过期，将跳转至登录页"}),setTimeout(async()=>{await n.push("/login")},3e3)),e),e=>Promise.reject(e));export{a as _};
