import{l as L,m as k,o as N,s as V,a as l,n as p,d as t,e as B,b as e,X as u,N as b,O as S,Y as U,c as $,p as _,x as r,v as m,a9 as z,I as R,Z as D,R as E,aa as G,P,E as T,z as A,A as F}from"./.pnpm-ba0d9b51.js";import{b as M}from"./index-a5283b64.js";import{_ as O}from"./index-f537e1ea.js";import"./index-efafad75.js";const X=o=>(A("data-v-61758c94"),o=o(),F(),o),Y=X(()=>_("br",null,null,-1)),Z={__name:"ChatsList",setup(o){const f=L(),i=k([]);N(async()=>{const s=await M();s.code===2e3?i.value=s.result.list:V({type:"danger",message:`获取聊天列表失败,${s.msg}`})});const h=async s=>{window.location.href=`#/main/my/my-chats/detail?toUserId=${s.toUserVo.id}`};return(s,d)=>{const v=b,g=z,y=R,n=D,c=E,w=G,C=P,x=T,I=S;return l(),p(u,null,[t(v,{title:"我的聊天","left-text":"返回","left-arrow":"",onClickLeft:d[0]||(d[0]=a=>B(f).go(-1))}),t(I,{finished:!0,"finished-text":"没有更多聊天了"},{default:e(()=>[(l(!0),p(u,null,U(i.value,a=>(l(),$(x,{inset:"",style:{"margin-top":"2%"},key:a},{default:e(()=>[t(C,{class:"chatPreview"},{default:e(()=>[t(c,{onClick:j=>h(a)},{default:e(()=>[t(n,{span:"8"},{default:e(()=>[t(y,{class:"avatar-container",round:"",width:"4.5rem",height:"4.5rem",src:a.toUserVo.avatar,fit:"cover"},{loading:e(()=>[t(g,{type:"spinner",size:"20"})]),_:2},1032,["src"])]),_:2},1024),t(n,{span:"14"},{default:e(()=>[t(c,{style:{height:"2rem"}},{default:e(()=>[t(n,{span:"24",style:{"font-size":"1.5rem"}},{default:e(()=>[_("strong",null,r(a.toUserVo.username),1)]),_:2},1024)]),_:2},1024),t(c,null,{default:e(()=>[t(n,{span:"24"},{default:e(()=>[_("div",null,[m(r(a.chats[a.chats.length-1].message)+" ",1),Y,m(" "+r(a.chats[a.chats.length-1].sendTime),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(n,{span:"2"},{default:e(()=>[t(w,{name:"arrow"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)}}},Q=O(Z,[["__scopeId","data-v-61758c94"]]);export{Q as default};
