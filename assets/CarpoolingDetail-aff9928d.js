import{H as N,m as u,l as U,o as C,s,a as T,n as k,d as o,e as x,p as v,b as i,V as D,N as B,B as I,F as $,v as g,D as F,E as R}from"./.pnpm-33e9fd8e.js";import{b as S,c as A}from"./index-298f05d4.js";import{u as j}from"./index-e4285400.js";import{_ as E}from"./index-33203c23.js";import"./index-85061a81.js";const G={class:"carpooling-detail-container"},M={class:"submit-order-btn"},q={__name:"CarpoolingDetail",setup(z){const f=j(),{currentUser:V}=N(f),d=u(""),m=U(),a=u({id:1,driverId:1,departureTime:"",arriveTime:"",departurePoint:"",arrivePoint:"",passingPoint:"",description:"",totalPassengerNo:1,leftPassengerNo:1,price:0}),r=u("");C(async()=>{const t=m.currentRoute.value.query.id,e=await S(t);e!==null&&e.code===2e3?(a.value=e.carpooling,d.value="到达: "+a.value.arrivePoint,r.value=JSON.parse(a.value.passingPoint).join(" ")):s({type:"danger",message:"获取拼车信息失败"})});const c=()=>{V.value.user.id===a.value.driverId?s({type:"warning",message:"不能和自己聊天"}):window.location.href=`#/main/my/my-chats/detail?toUserId=${a.value.driverId}`},P=async()=>{const t=[];r.value!==""&&t.push(r.value.split(" ")),window.location.href="#/main/driver/preview-map?departurePoint="+a.value.departurePoint+"&arrivePoint="+a.value.arrivePoint+"&passingPoint="+t},_=async()=>{const t=await A(a.value.id);t!==null&&t.code===2e3?(s({type:"success",message:"申请成功,3秒后跳转回主页"}),setTimeout(()=>{window.location.href="/main/passenger/passenger-home"},3e3)):t!==null?s({type:"danger",message:`申请失败,${t.msg}`}):s({type:"danger",message:"申请失败"})};return(t,e)=>{const y=B,n=F,p=I,b=R,w=$;return T(),k(D,null,[o(y,{title:d.value,"left-text":"返回","left-arrow":"","right-text":"联系司机",onClickLeft:e[0]||(e[0]=l=>x(m).go(-1)),onClickRight:e[1]||(e[1]=l=>c())},null,8,["title"]),v("div",G,[o(w,{readonly:""},{default:i(()=>[o(b,{inset:""},{default:i(()=>[o(n,{modelValue:a.value.departurePoint,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.departurePoint=l),name:"出发地",label:"出发地"},null,8,["modelValue"]),o(n,{modelValue:a.value.arrivePoint,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.arrivePoint=l),name:"到达地",label:"到达地"},null,8,["modelValue"]),o(n,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value=l),name:"途径地",label:"途径地"},null,8,["modelValue"]),o(p,{plain:"",block:"",type:"primary",size:"small",style:{width:"40%",margin:"2% auto"},onClick:e[5]||(e[5]=l=>P())},{default:i(()=>[g(" 预览行程路线 ")]),_:1}),o(n,{modelValue:a.value.departureTime,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.departureTime=l),name:"出发时间",label:"出发时间"},null,8,["modelValue"]),o(n,{modelValue:a.value.arriveTime,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.arriveTime=l),name:"到达时间",label:"到达时间"},null,8,["modelValue"]),o(n,{modelValue:a.value.description,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.description=l),name:"行程描述",label:"行程描述"},null,8,["modelValue"]),o(n,{modelValue:a.value.totalPassengerNo,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.totalPassengerNo=l),name:"总座位数",label:"总座位数"},null,8,["modelValue"]),o(n,{modelValue:a.value.leftPassengerNo,"onUpdate:modelValue":e[10]||(e[10]=l=>a.value.leftPassengerNo=l),name:"剩余座位数",label:"剩余座位数"},null,8,["modelValue"]),o(n,{modelValue:a.value.price,"onUpdate:modelValue":e[11]||(e[11]=l=>a.value.price=l),name:"价格",label:"价格"},null,8,["modelValue"])]),_:1})]),_:1}),v("div",M,[o(p,{plain:"",block:"",type:"primary",onClick:e[12]||(e[12]=l=>_())},{default:i(()=>[g(" 申请乘车 ")]),_:1})])])],64)}}},Q=E(q,[["__scopeId","data-v-02688f65"]]);export{Q as default};
