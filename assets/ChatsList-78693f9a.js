import{k as I,l as L,m as V,s as N,o as c,n as p,b as a,d as b,a as t,V as u,N as B,O as S,Y as U,c as $,p as _,x as r,v as f,a7 as z,I as R,a1 as D,R as E,a8 as G,P,E as T,z as A,A as F}from"./.pnpm-0253f632.js";import{b as M}from"./index-ce78151c.js";import{_ as O}from"./index-5cee732f.js";import"./index-2f5f63c9.js";const Y=o=>(A("data-v-6008ad1f"),o=o(),F(),o),j=Y(()=>_("br",null,null,-1)),q={__name:"ChatsList",setup(o){const m=I(),d=L([]);V(async()=>{const s=await M();s.code===2e3?d.value=s.result.list:N({type:"danger",message:`获取聊天列表失败,${s.msg}`})});const h=async s=>{window.location.href=`#/main/my/my-chats/detail?toUserId=${s.toUserVo.id}`};return(s,i)=>{const v=B,g=z,y=R,n=D,l=E,w=G,C=P,k=T,x=S;return c(),p(u,null,[a(v,{title:"我的聊天","left-text":"返回","left-arrow":"",onClickLeft:i[0]||(i[0]=e=>b(m).go(-1))}),a(x,{finished:!0,"finished-text":"没有更多聊天了"},{default:t(()=>[(c(!0),p(u,null,U(d.value,e=>(c(),$(k,{inset:"",style:{"margin-top":"2%"},key:e},{default:t(()=>[a(C,{class:"chatPreview"},{default:t(()=>[a(l,{onClick:H=>h(e)},{default:t(()=>[a(n,{span:"8"},{default:t(()=>[a(y,{class:"avatar-container",round:"",width:"4.5rem",height:"4.5rem",src:e.toUserVo.avatar},{loading:t(()=>[a(g,{type:"spinner",size:"20"})]),_:2},1032,["src"])]),_:2},1024),a(n,{span:"14"},{default:t(()=>[a(l,{style:{height:"2rem"}},{default:t(()=>[a(n,{span:"24",style:{"font-size":"1.5rem",color:"black"}},{default:t(()=>[_("strong",null,r(e.toUserVo.username),1)]),_:2},1024)]),_:2},1024),a(l,null,{default:t(()=>[a(n,{span:"24"},{default:t(()=>[_("div",null,[f(r(e.chats[e.chats.length-1].message)+" ",1),j,f(" "+r(e.chats[e.chats.length-1].sendTime),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(n,{span:"2"},{default:t(()=>[a(w,{name:"arrow"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)}}},X=O(q,[["__scopeId","data-v-6008ad1f"]]);export{X as default};
