import{k as b,l as I,m as L,s as V,o as l,n as p,b as e,d as N,a,V as u,N as B,O as S,a5 as U,E as $,c as z,p as _,x as r,v as f,a3 as R,I as D,a4 as E,R as G,a6 as P,P as T,z as A,A as F}from"./.pnpm-c62345a9.js";import{b as M}from"./index-6127ae00.js";import{_ as O}from"./index-92aeb057.js";import"./index-8e3cc4cb.js";const j=o=>(A("data-v-9bcc9ef4"),o=o(),F(),o),q=j(()=>_("br",null,null,-1)),H={__name:"ChatsList",setup(o){const m=b(),i=I([]);L(async()=>{const s=await M();s.code===2e3?i.value=s.result.list:V({type:"danger",message:`获取聊天列表失败,${s.msg}`})});const h=async s=>{window.location.href=`#/main/my/my-chats/detail?toUserId=${s.toUserVo.id}`};return(s,d)=>{const v=B,g=R,y=D,n=E,c=G,w=P,C=T,k=$,x=S;return l(),p(u,null,[e(v,{title:"我的聊天","left-text":"返回","left-arrow":"",onClickLeft:d[0]||(d[0]=t=>N(m).go(-1))}),e(x,{finished:!0,"finished-text":"没有更多聊天了"},{default:a(()=>[e(k,{inset:"",style:{"margin-top":"2%"}},{default:a(()=>[(l(!0),p(u,null,U(i.value,t=>(l(),z(C,{class:"chatPreview",key:t},{default:a(()=>[e(c,{onClick:J=>h(t)},{default:a(()=>[e(n,{span:"8"},{default:a(()=>[e(y,{class:"avatar-container",round:"",width:"4.5rem",height:"4.5rem",src:t.toUserVo.avatar},{loading:a(()=>[e(g,{type:"spinner",size:"20"})]),_:2},1032,["src"])]),_:2},1024),e(n,{span:"14"},{default:a(()=>[e(c,{style:{height:"2rem"}},{default:a(()=>[e(n,{span:"24",style:{"font-size":"1.5rem",color:"black"}},{default:a(()=>[_("strong",null,r(t.toUserVo.username),1)]),_:2},1024)]),_:2},1024),e(c,null,{default:a(()=>[e(n,{span:"24"},{default:a(()=>[_("div",null,[f(r(t.chats[t.chats.length-1].message)+" ",1),q,f(" "+r(t.chats[t.chats.length-1].sendTime),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(n,{span:"2"},{default:a(()=>[e(w,{name:"arrow"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64)}}},Y=O(H,[["__scopeId","data-v-9bcc9ef4"]]);export{Y as default};
