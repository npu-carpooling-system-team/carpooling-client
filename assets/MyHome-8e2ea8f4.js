import{k as I,H as x,l as H,m as L,o as s,n as v,b as e,a as t,V as M,s as R,E as B,d as o,p as g,x as V,c as _,y as $,a3 as b,I as z,a4 as E,R as U,P as q,O as A,z as D,A as F,g as G}from"./.pnpm-c62345a9.js";import{u as O,a as P}from"./index-01ed37e0.js";import{h as T,a as j}from"./index-6127ae00.js";import{_ as J}from"./index-911a86d7.js";import"./index-8e3cc4cb.js";const K=n=>(D("data-v-d2c4a1c5"),n=n(),F(),n),Q=K(()=>g("h4",null,"欢迎您使用西工大拼车平台",-1)),W={key:0},X={__name:"MyHome",setup(n){const c=I(),p=O(),k=P(),{currentUser:m}=x(p),C=async()=>{await j(),p.reset(),k.reset(),G.remove("token"),await c.push("/login")},d=H(!1),w=async()=>{const r=await T();if(r.code===2e3){const a=r.result.list;for(const i of a)if(i.hasNewMessage){d.value=!0;break}}else R({type:"danger",message:`获取聊天列表失败,${r.msg}`})};return L(()=>{w()}),(r,a)=>{const i=b,N=z,f=E,S=U,u=B,l=q,h=A;return s(),v(M,null,[e(u,{inset:""},{default:t(()=>[e(S,{class:"personCard"},{default:t(()=>[e(f,{span:"8"},{default:t(()=>[e(N,{class:"avatar-container",round:"",width:"6rem",height:"6rem",src:o(m).user.userImage},{loading:t(()=>[e(i,{type:"spinner",size:"20"})]),_:1},8,["src"])]),_:1}),e(f,{span:"16"},{default:t(()=>[g("h2",null,V(o(m).user.username),1),Q]),_:1})]),_:1})]),_:1}),e(u,{inset:""},{default:t(()=>[e(h,null,{default:t(()=>[(s(),_(l,{key:1,title:"我的聊天",onClick:a[0]||(a[0]=y=>o(c).push("/main/my/my-chats/list"))},{default:t(()=>[d.value?(s(),v("a",W," 您有新的消息,请查看 ")):$("",!0)]),_:1})),(s(),_(l,{key:2,title:"个人信息维护",onClick:a[1]||(a[1]=y=>o(c).push("/main/my/revise-info"))})),(s(),_(l,{key:3,title:"支付宝与解绑",onClick:a[2]||(a[2]=y=>o(c).push("/main/my/handle-alipay"))}))]),_:1})]),_:1}),e(u,{inset:""},{default:t(()=>[e(h,null,{default:t(()=>[(s(),_(l,{key:4,title:"退出登录",onClick:C}))]),_:1})]),_:1})],64)}}},se=J(X,[["__scopeId","data-v-d2c4a1c5"]]);export{se as default};
